var left = document.getElementsByClassName('left')[0],
    right = document.getElementsByClassName('right')[0],
    nextButtons = document.getElementsByClassName('next-button'),
    backButtons = document.getElementsByClassName('back-button'),
    leftAreas = [...left.getElementsByClassName('a-question'), ...left.getElementsByClassName('a-more')];
    rightAreas = [...right.getElementsByClassName('a-question'), ...right.getElementsByClassName('a-more')];


Array.from(leftAreas).forEach((el, i) => {
    el.onfocus = e => {
	el.style.borderColor = "red";
	if (rightAreas[i].classList[0] == "a-question") {
	    rightAreas[i].parentNode.getElementsByClassName('ex-button')[0].style.opacity = "1";
	    rightAreas[i].setAttribute("style", "color: #a6a6a6 !important; border-color: red; height: 100px !important; opacity: 1;");
	} else {
	    rightAreas[i].parentNode.getElementsByClassName('ex-button')[1].setAttribute("style", "opacity:1; margin-top: -72px;");
	    rightAreas[i].setAttribute("style", "color: #a6a6a6 !important; border-color: red; height: 100px !important; opacity: 1; margin-bottom: 15px;");
	}
    };
    el.onblur = e => {
	el.style.borderColor = "#242224";
	if (rightAreas[i].classList[0] == "a-question") {
	    rightAreas[i].parentNode.getElementsByClassName('ex-button')[0].style.opacity = "0";
	    right.getElementsByClassName('a-question')[i].style.borderColor = "#242224";
	    right.getElementsByClassName('a-more')[i].style.borderColor = "#242224";
	    right.getElementsByClassName('ex-button')[i].style.backgroundColor = "#3e3e3e";
	} else {
	    rightAreas[i].parentNode.getElementsByClassName('ex-button')[1].style.opacity = "0";
	    rightAreas[i].style.borderColor = "#242224";
	}
    };
});


Array.from(nextButtons).forEach((el, i) => el.onclick = e => {showMore(i); return false;});
Array.from(backButtons).forEach((el, i) => el.onclick = e => {hideMore(i); return false;});



const showMore = i => {
    showIt(left, 'next-button', i);
    showIt(right, 'ex-button', i);
};

const hideMore = i => {
    hideIt(left, 'next-button', i);
    hideIt(right, 'ex-button', i);
};

const showIt = (div, cls, i) => {
    div.getElementsByClassName('question')[i].style.opacity = "0.7";
    div.getElementsByClassName('question')[i].style.margin = "0px";
    div.getElementsByClassName('a-question')[i].style.opacity = "0";
    div.getElementsByClassName('a-question')[i].style.height = "0";
    div.getElementsByClassName(cls)[i].style.padding = "0";
    div.getElementsByClassName(cls)[i].style.opacity = "0";
    div.getElementsByClassName('a-more')[i].setAttribute('style', 'height: 100px !important; opacity: 1; margin-bottom: 15px;');
    div.getElementsByClassName('more')[i].setAttribute('style', 'height: 22px !important; opacity: 1; margin-top: -10px; margin-bottom: 5px;');
    if (div.getElementsByClassName('back-button')[i])
	div.getElementsByClassName('back-button')[i].setAttribute('style', 'height: 28px; opacity: 1;');
};

const hideIt = (div, cls, i) => {
    div.getElementsByClassName('question')[i].style.opacity = "1";
    div.getElementsByClassName('question')[i].style.margin = "0px";
    div.getElementsByClassName('a-question')[i].style.opacity = "1";
    div.getElementsByClassName('a-question')[i].style.height = "100px";
    if (cls === 'next-button') {
	div.getElementsByClassName(cls)[i].style.opacity = "1";
	div.getElementsByClassName(cls)[i].style.height = "30px";
	div.getElementsByClassName(cls)[i].style.padding = "10px 10px 0px 10px";
    } else {
	div.getElementsByClassName(cls)[i].style.height = "50px";
	div.getElementsByClassName(cls)[i].style.padding = "10px 20px 10px 20px";
    }
    div.getElementsByClassName('a-more')[i].setAttribute('style', 'height: 0px !important; opacity: 0; margin-bottom: 0px;');
    div.getElementsByClassName('more')[i].setAttribute('style', 'height: 0px !important; opacity: 0; margin-top: 0px; margin-bottom: 0px;');
    if (div.getElementsByClassName('back-button')[i])
	div.getElementsByClassName('back-button')[i].setAttribute('style', 'height: 0px; opacity: 0;');
};
