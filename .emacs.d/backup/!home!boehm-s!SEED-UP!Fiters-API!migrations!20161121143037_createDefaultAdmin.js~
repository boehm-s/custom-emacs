const bcrypt = require('bcrypt-then');

var passwd = bcrypt.hashSync("root", 10);

exports.up = function(knex, Promise) {
    return Promise.all([
	knex('admin')
	    .returning('*')
	    .insert({email: "admin@mail.net", firstname: "root", lastname: "root", password: passwd})
    ]);
};

exports.down = function(knex, Promise) {
    return Promise.all([
	knex('admin')
	    .where("firstname", "root")
	    .del()
	    .then(count => {
		console.log("admin deleted !");
	    })
    ]);
};
