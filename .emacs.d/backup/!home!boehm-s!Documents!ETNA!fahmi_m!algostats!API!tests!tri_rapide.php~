#!/usr/bin/env php

<?php

require_once('../controllers/includes/generate_array.php');

$array_generator = new Gen_arr();


function tri_rapide($tab, $i , $j)
{
    echo ".";
    if ($tab == NULL)
        return 0;

    $pivot = (int) $tab[($i + $j) / 2];
    $start = $i;
    $end = $j;
    $ok = 42;


    if ($i >= $j)
        return $tab;

    while ($ok)
    {
        while ($start < $end && $tab[$end] > $pivot)
            $end--;
        while ($start < $end && $tab[$start] < $pivot)
            $start++;
        if ($start < $end)
        {
            $machin = $tab[$end];
            $tab[$end] = $tab[$start];
            $tab[$start] = $machin;
            $end--;
            $start++;
        }
        else
            $ok = 0;
    }
    $tab = tri_rapide($tab, 0, $end);
    $tab = tri_rapide($tab, $end + 1, $j);
    return $tab;
}

$array = $array_generator->random(100);
$tab = [-987,32,64,85,463,49,76,1457, 746,-8];
$tab = tri_rapide($array, 0 , 99);
print_r($tab);